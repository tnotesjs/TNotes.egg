# [0008. ç›®å½•ç»“æ„](https://github.com/Tdahuyou/TNotes.egg/tree/main/notes/0008.%20%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84)

<!-- region:toc -->

- [1. ğŸ“’ å¿«é€Ÿäº†è§£ Egg.js åŸºæœ¬ç›®å½•ç»“æ„](#1--å¿«é€Ÿäº†è§£-eggjs-åŸºæœ¬ç›®å½•ç»“æ„)

<!-- endregion:toc -->

## 1. ğŸ“’ å¿«é€Ÿäº†è§£ Egg.js åŸºæœ¬ç›®å½•ç»“æ„

```bash
egg-project
â”œâ”€â”€ package.json # é¡¹ç›®çš„åŒ…ç®¡ç†æ–‡ä»¶ï¼Œå®šä¹‰äº†é¡¹ç›®ä¾èµ–ã€è„šæœ¬å’Œå…¶ä»–å…ƒä¿¡æ¯ã€‚
â”œâ”€â”€ app.jsï¼ˆå¯é€‰ï¼‰ # ç”¨äºè‡ªå®šä¹‰åº”ç”¨å¯åŠ¨æ—¶çš„åˆå§‹åŒ–å·¥ä½œï¼Œä¾‹å¦‚å…¨å±€äº‹ä»¶ç›‘å¬æˆ–è‡ªå®šä¹‰é€»è¾‘ã€‚
â”œâ”€â”€ agent.jsï¼ˆå¯é€‰ï¼‰ # ç”¨äºè‡ªå®šä¹‰ Agent è¿›ç¨‹çš„åˆå§‹åŒ–å·¥ä½œï¼ŒAgent è¿›ç¨‹é€šå¸¸ç”¨äºå¤„ç†ä¸€äº›åå°ä»»åŠ¡ã€‚
â”œâ”€â”€ app
â”‚   â”œâ”€â”€ router.js # ç”¨äºé…ç½® URL è·¯ç”±è§„åˆ™ï¼Œå°†è¯·æ±‚è·¯å¾„æ˜ å°„åˆ°å¯¹åº”çš„ Controller çš„ Actionã€‚
â”‚   â”œâ”€â”€ controller # ç”¨äºè§£æç”¨æˆ·çš„è¾“å…¥ï¼Œå¤„ç†åè¿”å›ç›¸åº”çš„ç»“æœã€‚
â”‚   â”‚   â””â”€â”€ home.js # æ¯ä¸€ä¸ª .js æ–‡ä»¶å°±æ˜¯ä¸€ä¸ªå…·ä½“çš„ Controller ç±»ï¼Œå…¶ä¸­çš„æ¯ä¸ªå®ä¾‹æ–¹æ³•å°±æ˜¯ä¸€ä¸ª Actionã€‚ï¼ˆç†æ¸…è¿™äº›æœ¯è¯­ï¼Œå¯¹é˜…è¯»æ–‡æ¡£ä¼šæœ‰æ‰€å¸®åŠ©ã€‚ï¼‰
â”‚   â”œâ”€â”€ serviceï¼ˆå¯é€‰ï¼‰ # ç”¨äºç¼–å†™ä¸šåŠ¡é€»è¾‘å±‚ï¼Œå»ºè®®ä½¿ç”¨ã€‚ä¸è¦å°†ä¸šåŠ¡é€»è¾‘ä¸€èµ·ä¸¢åˆ° Controller ä¸­ï¼Œå•ç‹¬å°†å…¶æŠ½ç¦»å‡ºæ¥ä¸¢åˆ° Service ç›®å½•ä¸‹è¾¹å„¿ã€‚
â”‚   â”‚   â””â”€â”€ user.js # å®šä¹‰ä¸æ•°æ®åº“äº¤äº’çš„æ¨¡å‹ï¼Œä¾‹å¦‚ç”¨æˆ·è¡¨çš„å­—æ®µå’Œå…³ç³»ã€‚
â”‚   â”œâ”€â”€ middlewareï¼ˆå¯é€‰ï¼‰ # ç”¨äºç¼–å†™ä¸­é—´ä»¶ï¼Œä¸­é—´ä»¶å¯ä»¥åœ¨è¯·æ±‚åˆ°è¾¾ Controller ä¹‹å‰æˆ–ä¹‹åæ‰§è¡Œä¸€äº›é€šç”¨é€»è¾‘ã€‚Controller å’Œä¸­é—´ä»¶æ²¡æœ‰ç›´æ¥å…³ç³»ã€‚ä¸­é—´ä»¶å¯ä»¥é€šè¿‡ Router é…ç½®ä¸ºå±€éƒ¨ä¸­é—´ä»¶ï¼Œæˆ–è€…é€šè¿‡å…¨å±€é…ç½®åº”ç”¨äºæ‰€æœ‰è·¯ç”±ã€‚
â”‚   â”‚   â””â”€â”€ response_time.js # å“åº”æ—¶é—´ä¸­é—´ä»¶ï¼Œç”¨äºè®°å½•è¯·æ±‚çš„å“åº”æ—¶é—´ã€‚
â”‚   â”œâ”€â”€ modelï¼ˆå¯é€‰ï¼‰ # ç”¨äºæ”¾ç½®é¢†åŸŸæ¨¡å‹ï¼Œå¦‚ [egg-sequelize](https://github.com/eggjs/egg-sequelize) ç­‰é¢†åŸŸç±»ç›¸å…³æ’ä»¶ã€‚
â”‚   â”œâ”€â”€ scheduleï¼ˆå¯é€‰ï¼‰ # ç”¨äºå®šæ—¶ä»»åŠ¡ã€‚è¿™æ˜¯ç”±å†…ç½®æ’ä»¶ [@egg/schedule](https://github.com/eggjs/schedule) çº¦å®šçš„ç›®å½•ï¼Œå…·ä½“ç”¨æ³•å¯ä»¥å‚è€ƒè¯¥æ’ä»¶çš„è¯´æ˜æ–‡æ¡£ã€‚
â”‚   â”‚   â””â”€â”€ my_task.js # è‡ªå®šä¹‰çš„å®šæ—¶ä»»åŠ¡ï¼Œæ¯”å¦‚å®šä¹‰ä¸€ä¸ªå®šæ—¶ä»»åŠ¡ï¼Œæ¯å¤©å‡Œæ™¨æ¸…ç†è¿‡æœŸæ•°æ®ã€‚
â”‚   â”œâ”€â”€ publicï¼ˆå¯é€‰ï¼‰ # ç”¨äºæ”¾ç½®é™æ€èµ„æºã€‚è¿™æ˜¯ç”±å†…ç½®æ’ä»¶ [@egg/static](https://github.com/eggjs/static) çº¦å®šçš„ç›®å½•ï¼Œå…·ä½“ç”¨æ³•å¯ä»¥å‚è€ƒè¯¥æ’ä»¶çš„è¯´æ˜æ–‡æ¡£ã€‚
â”‚   â”‚   â””â”€â”€ reset.css # å…·ä½“çš„é™æ€èµ„æºæ–‡ä»¶ï¼Œä¾‹å¦‚ CSS é‡ç½®æ ·å¼è¡¨ã€‚
â”‚   â”œâ”€â”€ viewï¼ˆå¯é€‰ï¼‰ # ç”¨äºæ”¾ç½®æ¨¡æ¿æ–‡ä»¶ï¼Œæ”¯æŒå¤šç§æ¨¡æ¿å¼•æ“ï¼ˆå¦‚ Nunjucksã€EJS ç­‰ï¼‰ã€‚
â”‚   â”‚   â””â”€â”€ home.tpl # æ¨¡æ¿æ–‡ä»¶ï¼Œç”¨äºæ¸²æŸ“ HTML é¡µé¢ã€‚
â”‚   â””â”€â”€ extendï¼ˆå¯é€‰ï¼‰ # ç”¨äºæ¡†æ¶çš„æ‰©å±•ï¼Œå…è®¸å¼€å‘è€…å¯¹ Egg.js çš„æ ¸å¿ƒå¯¹è±¡è¿›è¡Œæ‰©å±•ã€‚
â”‚       â”œâ”€â”€ helper.jsï¼ˆå¯é€‰ï¼‰ # æ‰©å±• Helper å¯¹è±¡ï¼Œæä¾›å…¨å±€å¯ç”¨çš„å·¥å…·å‡½æ•°ã€‚
â”‚       â”œâ”€â”€ request.jsï¼ˆå¯é€‰ï¼‰ # æ‰©å±• Request å¯¹è±¡ï¼Œå¢å¼ºè¯·æ±‚å¯¹è±¡çš„åŠŸèƒ½ã€‚
â”‚       â”œâ”€â”€ response.jsï¼ˆå¯é€‰ï¼‰ # æ‰©å±• Response å¯¹è±¡ï¼Œå¢å¼ºå“åº”å¯¹è±¡çš„åŠŸèƒ½ã€‚
â”‚       â”œâ”€â”€ context.jsï¼ˆå¯é€‰ï¼‰ # æ‰©å±• Context å¯¹è±¡ï¼Œå¢å¼ºä¸Šä¸‹æ–‡å¯¹è±¡çš„åŠŸèƒ½ã€‚
â”‚       â”œâ”€â”€ application.jsï¼ˆå¯é€‰ï¼‰ # æ‰©å±• Application å¯¹è±¡ï¼Œå¢å¼ºåº”ç”¨å®ä¾‹çš„åŠŸèƒ½ã€‚
â”‚       â””â”€â”€ agent.jsï¼ˆå¯é€‰ï¼‰ # æ‰©å±• Agent å¯¹è±¡ï¼Œå¢å¼º Agent è¿›ç¨‹çš„åŠŸèƒ½ã€‚
â”œâ”€â”€ config # ç”¨äºç¼–å†™é…ç½®æ–‡ä»¶ï¼Œå®šä¹‰é¡¹ç›®çš„è¿è¡Œæ—¶é…ç½®ã€‚
â”‚   â”œâ”€â”€ plugin.js # ç”¨äºé…ç½®éœ€è¦åŠ è½½çš„æ’ä»¶ï¼Œå¯ç”¨æˆ–ç¦ç”¨æ’ä»¶ã€‚
â”‚   â”œâ”€â”€ config.default.js # é»˜è®¤é…ç½®æ–‡ä»¶ï¼Œé€‚ç”¨äºæ‰€æœ‰ç¯å¢ƒã€‚
â”‚   â”œâ”€â”€ config.prod.js # ç”Ÿäº§ç¯å¢ƒçš„é…ç½®æ–‡ä»¶ï¼Œè¦†ç›–é»˜è®¤é…ç½®ã€‚
â”‚   â”œâ”€â”€ config.test.jsï¼ˆå¯é€‰ï¼‰ # æµ‹è¯•ç¯å¢ƒçš„é…ç½®æ–‡ä»¶ï¼Œè¦†ç›–é»˜è®¤é…ç½®ã€‚
â”‚   â”œâ”€â”€ config.local.jsï¼ˆå¯é€‰ï¼‰ # æœ¬åœ°å¼€å‘ç¯å¢ƒçš„é…ç½®æ–‡ä»¶ï¼Œè¦†ç›–é»˜è®¤é…ç½®ã€‚
â”‚   â””â”€â”€ config.unittest.jsï¼ˆå¯é€‰ï¼‰ # å•å…ƒæµ‹è¯•ç¯å¢ƒçš„é…ç½®æ–‡ä»¶ï¼Œè¦†ç›–é»˜è®¤é…ç½®ã€‚
â””â”€â”€ test # ç”¨äºå•å…ƒæµ‹è¯•ï¼Œç¡®ä¿ä»£ç è´¨é‡å’ŒåŠŸèƒ½æ­£ç¡®æ€§ã€‚
    â”œâ”€â”€ middleware # å®šä¹‰ middleware çš„å•æµ‹ã€‚
    â”‚   â””â”€â”€ response_time.test.js # æµ‹è¯• response_time ä¸­é—´ä»¶çš„åŠŸèƒ½ã€‚
    â””â”€â”€ controller # å®šä¹‰ controller çš„å•æµ‹ã€‚
        â””â”€â”€ home.test.js # æµ‹è¯• home æ§åˆ¶å™¨çš„åŠŸèƒ½ã€‚
```

> **è‹¥éœ€è‡ªå®šä¹‰è‡ªå·±çš„ç›®å½•è§„èŒƒï¼Œå‚è§ [Loader API](https://eggjs.org/zh-cn/advanced/loader.html)**
